# Переработка UI по аналогии с Roo Code

## Обзор изменений

UI плагина был переработан для улучшения пользовательского опыта по аналогии с Roo Code. Теперь при запуске плагина пользователь сразу видит список сессий с возможностью начать новый чат.

## Основные изменения

### 1. Новая навигация

**До:**
- Пользователь попадал в пустой чат
- Список сессий был скрыт и открывался по кнопке
- Переключение между сессиями было неочевидным

**После:**
- При старте отображается экран со списком сессий
- Инпут для ввода сообщения всегда доступен внизу экрана
- Можно сразу начать новый чат или выбрать существующую сессию

### 2. Два режима отображения

#### Режим списка сессий (`view: 'sessions'`)
```
┌─────────────────────────────┐
│ ← CodeLab          + ⚙️     │ ← Header
├─────────────────────────────┤
│ 🔍 Search...          [+]   │ ← Поиск и создание
├─────────────────────────────┤
│                             │
│  💬 Недавние задачи         │
│                             │
│  ┌─────────────────────┐   │
│  │ продолжи реализацию │   │
│  │ 💬 3 messages  1m   │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ сделай коммит       │   │
│  │ 💬 2 messages  10h  │   │
│  └─────────────────────┘   │
│                             │
├─────────────────────────────┤
│ 📎 [Начните новый чат...] 📤│ ← Инпут
└─────────────────────────────┘
```

#### Режим чата (`view: 'chat'`)
```
┌─────────────────────────────┐
│ ← CodeLab          + ⚙️     │ ← Header с кнопкой "Назад"
├─────────────────────────────┤
│                             │
│  👤 User: Привет            │
│                             │
│  🤖 Assistant: Здравствуйте │
│                             │
│                             │
├─────────────────────────────┤
│ 📎 [Type your message...] 📤│ ← Инпут
└─────────────────────────────┘
```

### 3. Измененные компоненты

#### [`App.tsx`](../webview/src/App.tsx)
- Добавлено состояние `view` для переключения между режимами
- Логика автоматического переключения:
  - При отправке сообщения → переход в режим чата
  - При создании нового чата → возврат к списку сессий
  - При удалении текущей сессии → возврат к списку
- Условный рендеринг компонентов в зависимости от режима

#### [`ChatHeader.tsx`](../webview/src/components/ChatHeader.tsx)
- Добавлена кнопка "Назад" для возврата к списку сессий
- Новые пропсы: `onBack`, `showBackButton`
- Упрощен интерфейс (убрана кнопка переключения сессий)

#### [`ChatInput.tsx`](../webview/src/components/ChatInput.tsx)
- Добавлен проп `placeholder` для кастомизации текста подсказки
- В режиме списка сессий: "Начните новый чат или выберите сессию выше..."
- В режиме чата: "Type your message..."

#### [`SessionList.tsx`](../webview/src/components/SessionList.tsx)
- Улучшено пустое состояние с иконкой и подсказкой
- Текст на русском языке
- Более информативное сообщение для пользователя

### 4. Обновленные стили

#### [`SessionList.module.css`](../webview/src/components/SessionList.module.css)
- Улучшенный дизайн карточек сессий
- Анимации при наведении (transform, box-shadow)
- Более крупные отступы и скругления
- Эмодзи-иконки для лучшей визуализации
- Адаптивное пустое состояние

#### [`ChatHeader.module.css`](../webview/src/components/ChatHeader.module.css)
- Добавлена секция `.leftSection` для группировки кнопки "Назад" и заголовка
- Улучшенное выравнивание элементов

## Преимущества нового UI

1. **Интуитивность**: Пользователь сразу видит доступные сессии
2. **Быстрый доступ**: Можно начать новый чат прямо с главного экрана
3. **Контекст**: Всегда понятно, где находишься (список или чат)
4. **Навигация**: Простое переключение между режимами
5. **Визуальная привлекательность**: Современный дизайн с анимациями

## Поведение

### Автоматическое переключение режимов

1. **Старт плагина** → Режим списка сессий
2. **Выбор сессии** → Режим чата
3. **Отправка сообщения из списка** → Создание новой сессии + режим чата
4. **Кнопка "Назад"** → Режим списка сессий
5. **Кнопка "Новый чат"** → Режим списка сессий

### Создание новой сессии

Пользователь может начать новый чат двумя способами:
1. Ввести сообщение в инпут на экране списка сессий
2. Нажать кнопку "+" в header

## Совместимость

Все изменения обратно совместимы с существующим API расширения. Логика работы с сессиями не изменилась, изменился только UI.

## Тестирование

Для тестирования нового UI:
1. Запустите расширение: `F5` в VS Code
2. Откройте панель CodeLab
3. Проверьте:
   - Отображение списка сессий при старте
   - Создание новой сессии через инпут
   - Переключение между сессиями
   - Навигацию "Назад" из чата
   - Удаление сессий
   - Поиск по сессиям

## Будущие улучшения

- Добавить группировку сессий по датам (Сегодня, Вчера, На этой неделе)
- Реализовать drag-and-drop для сортировки сессий
- Добавить возможность переименования сессий
- Реализовать экспорт/импорт сессий
