# üìò –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï

## VS Code –ø–ª–∞–≥–∏–Ω **CodeLab** (AI Code Assistant)

---

## 1. –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ù–∞–∑–≤–∞–Ω–∏–µ:** CodeLab VS Code Plugin
**–¢–∏–ø:** VS Code Extension
**–¶–µ–ª—å:**
–°–æ–∑–¥–∞–Ω–∏–µ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å UI –≤ –≤–∏–¥–µ —á–∞—Ç–∞, –≥–ª—É–±–æ–∫–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∞–Ω–∞–ª–∏–∑–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–¥–∞, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ RooCode.

---

## 2. –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏:

* –ü–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
* –û–±–µ—Å–ø–µ—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ–¥–æ–º —á–µ—Ä–µ–∑ AI
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å **–≤—Å–µ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è**
* –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ –ø–ª–∞–≥–∏–Ω–µ, –≤—ã–Ω–µ—Å—Ç–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –≤ backend

---

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫–ª—é—á–µ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ)

### 3.1 –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
VS Code Plugin (Thin Client)
‚îÇ
‚îú‚îÄ WebView UI (Chat)
‚îú‚îÄ Context Collector
‚îú‚îÄ REST / WebSocket Client
‚îú‚îÄ LSP Client
‚îî‚îÄ Diff / Apply Engine
        ‚îÇ
        ‚ñº
Backend AI Orchestrator
‚îÇ
‚îú‚îÄ LLM Gateway
‚îú‚îÄ Prompt Orchestrator
‚îú‚îÄ Memory / RAG
‚îú‚îÄ Tool Executor
‚îî‚îÄ LSP Server
```

‚ùó **–ü–ª–∞–≥–∏–Ω –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç AI-–ª–æ–≥–∏–∫–∏**

---

## 4. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### 4.1 –ü–ª–∞–≥–∏–Ω (Frontend)

* TypeScript
* VS Code Extension API
* WebView
* esbuild
* SSE + REST
* LSP Client

### 4.2 Backend (–Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–ª–∞–≥–∏–Ω–∞, –Ω–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è)

* FastAPI / Python
* SSE
* LLM (OpenAI / local / custom)

---

## 5. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

---

### 5.1 UI (WebView Sidebar)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

* Sidebar ViewContainer (Activity Bar)
* Chat-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

  * –ø–æ–ª–µ –≤–≤–æ–¥–∞
  * –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
  * markdown rendering
  * code blocks
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ streaming (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –æ—Ç–≤–µ—Ç–∞)
* –ö–Ω–æ–ø–∫–∏:

  * Apply changes
  * Copy
  * Retry
* –°—Ç–∞—Ç—É—Å—ã:

  * loading
  * streaming
  * error

---

### 5.2 –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–¥–∞

–ü–ª–∞–≥–∏–Ω **–æ–±—è–∑–∞–Ω** —É–º–µ—Ç—å —Å–æ–±–∏—Ä–∞—Ç—å:

* –∞–∫—Ç–∏–≤–Ω—ã–π —Ñ–∞–π–ª
* –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –∫–æ–¥
* —è–∑—ã–∫ —Ñ–∞–π–ª–∞ (`languageId`)
* –ø—É—Ç—å —Ñ–∞–π–ª–∞
* workspace —Ñ–∞–π–ª—ã (–ø–æ –ª–∏–º–∏—Ç–∞–º)
* diagnostics (—á–µ—Ä–µ–∑ LSP)

–ö–æ–Ω—Ç–µ–∫—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ backend –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ.

---

### 5.3 –ö–æ–º–∞–Ω–¥—ã VS Code

–ü–ª–∞–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—ã:

* `CodeLab: Open Chat`
* `CodeLab: Explain Selection`
* `CodeLab: Refactor Selection`
* `CodeLab: Fix Errors`
* `CodeLab: Generate Code`

–ö–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑:

* Command Palette
* Context Menu (Editor)

---

### 5.4 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Backend

#### REST API

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

* –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
* non-stream –æ—Ç–≤–µ—Ç–æ–≤
* —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### SSE

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

* streaming –æ—Ç–≤–µ—Ç–æ–≤
* –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
* –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö diff

---

### 5.5 Streaming

---

Plugin –æ–±—è–∑–∞–Ω:

* –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –ø–æ –º–µ—Ä–µ –ø–æ–ª—É—á–µ–Ω–∏—è
* –∞–∫–∫—É–º—É–ª–∏—Ä–æ–≤–∞—Ç—å diff
* –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### 5.6 Diff –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

‚ùó **–ó–∞–ø—Ä–µ—â–µ–Ω–æ –Ω–∞–ø—Ä—è–º—É—é –∑–∞–º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç**

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

* backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç unified diff
* –ø–ª–∞–≥–∏–Ω:

  * –ø–∞—Ä—Å–∏—Ç diff
  * –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç preview
  * –ø—Ä–∏–º–µ–Ω—è–µ—Ç —á–µ—Ä–µ–∑ `WorkspaceEdit`
* –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

### 5.7 LSP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ü–ª–∞–≥–∏–Ω –¥–æ–ª–∂–µ–Ω:

* –ø–æ–¥–∫–ª—é—á–∞—Ç—å LSP client
* –ø–æ–ª—É—á–∞—Ç—å:

  * diagnostics
  * symbols
  * semantic tokens
* –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ backend –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç

---

## 6. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 6.1 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

* Startup extension ‚â§ 100ms
* WebView load ‚â§ 200ms
* –ö–æ–Ω—Ç–µ–∫—Å—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ —Ä–∞–∑–º–µ—Ä—É

### 6.2 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* CSP –¥–ª—è WebView
* no `eval`
* API tokens ‚Üí `SecretStorage`
* sandbox WebView

### 6.3 –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å

* graceful error handling
* reconnect SSE
* fallback REST

---

## 7. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ø–ª–∞–≥–∏–Ω)

```
src/
‚îú‚îÄ‚îÄ extension.ts
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ ChatViewProvider.ts
‚îÇ   ‚îî‚îÄ‚îÄ webview/
‚îú‚îÄ‚îÄ commands/
‚îú‚îÄ‚îÄ context/
‚îú‚îÄ‚îÄ api/
‚îú‚îÄ‚îÄ lsp/
‚îú‚îÄ‚îÄ diff/
‚îî‚îÄ‚îÄ utils/
```

---

## 8. –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Roadmap)

### Phase 1 ‚Äî MVP

* Sidebar WebView
* Chat UI
* REST backend
* Selection context

### Phase 2

* SSE streaming
* Diff preview
* Apply changes

### Phase 3

* Workspace context
* LSP integration
* Editor commands

### Phase 4

* Memory
* Multi-file refactor
* Tooling

---

## 9. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

–ü–ª–∞–≥–∏–Ω —Å—á–∏—Ç–∞–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–º, –µ—Å–ª–∏:

* –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ F5
* –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç Sidebar Chat
* –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ç—Ä–∏–º–∏—Ç –æ—Ç–≤–µ—Ç—ã
* –ø—Ä–∏–º–µ–Ω—è–µ—Ç diff –±–µ–∑–æ–ø–∞—Å–Ω–æ
* –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç AI-–ª–æ–≥–∏–∫–∏ –≤–Ω—É—Ç—Ä–∏ extension

---

## 10. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

* –ü–ª–∞–≥–∏–Ω –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
* –ü–ª–∞–≥–∏–Ω –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —è–≤–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* Backend —è–≤–ª—è–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º